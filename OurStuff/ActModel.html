<!DOCTYPE html>
<!-- saved from url=(0059)https://artistoo.net/explorables/asset/frame-obstacles.html -->
<html lang="en" style="transition: background-color 0.15s;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ActModel</title>
<link rel="stylesheet" href="./ActModel_files/explorable.css">
<style type="text/css">
body{
	 padding-left : 5px;
	 padding-right: 5px;
	 padding-top: 0px;
	 margin: 0px;
}

</style>

<script src="./ActModel_files/artistoo.js"></script>
<script>
"use strict"
let config = {

	// Grid settings
	ndim : 2,
	field_size : [200,200],
	
	// CPM parameters and configuration
	conf : {
		// Basic CPM parameters
		torus : [true,true],						// Should the grid have linked borders?
		T : 20,								// CPM temperature
		
		// Constraint parameters. 
		// Mostly these have the format of an array in which each element specifies the
		// parameter value for one of the cellkinds on the grid.
		// First value is always cellkind 0 (the background) and is often not used.
				
		// Adhesion parameters:
		J: [[0,140], [140,0]],
		
		// VolumeConstraint parameters
		LAMBDA_V: [0,50],					// VolumeConstraint importance per cellkind
		V: [0,2500],							// Target volume of each cellkind
		
		// PerimeterConstraint parameters
		LAMBDA_P: [0,5],						// PerimeterConstraint importance per cellkind
		P : [0,650],						// Target perimeter of each cellkind
		
		// ActivityConstraint parameters
		LAMBDA_ACT : [0,80],				// ActivityConstraint importance per cellkind
		MAX_ACT : [0,200],					// Activity memory duration per cellkind
		ACT_MEAN : "geometric"				// Is neighborhood activity computed as a
											// "geometric" or "arithmetic" mean?

	},
	
	// Simulation setup and configuration
	simsettings : {
	
		// Cells on the grid
		NRCELLS : [0],						// Number of cells to seed for all
											// non-background cellkinds.
		// Runtime etc
		BURNIN : 0,
		RUNTIME : 15001,
		RUNTIME_BROWSER : "Inf",
		
		// Visualization
		CANVASCOLOR : "eaecef",
		CELLCOLOR : ["000000"],
		ACTCOLOR : [true],					// Should pixel activity values be displayed?
		SHOWBORDERS : [false],				// Should cellborders be displayed?
		zoom : 2,							// zoom in on canvas with this factor.
		
		// Output images
		SAVEIMG : false,					// Should a png image of the grid be saved
											// during the simulation?
		
		// Output stats etc
		STATSOUT : { browser: false, node: true }, // Should stats be computed?
		LOGRATE : 10							// Output stats every <LOGRATE> MCS.

	}
}
/*	---------------------------------- */
let sim, meter


function initialize(){
	let custommethods = {
			initializeGrid : initializeGrid,
			buildChannel : buildChannel,
			drawBelow : drawBelow
		 }

	sim = new CPM.Simulation( config, custommethods )
	sim.Cim = new CPM.Canvas( sim.C, {
		zoom:sim.conf.zoom, 
		parentElement : document.getElementById("sim")
	} )
	sim.helpClasses[ "canvas" ] = true
	step()
}


function step(){
	for( let i = 0; i < 5; i++ ){
		sim.step()
	}
	

	if( sim.conf["RUNTIME_BROWSER"] == "Inf" | sim.time+1 < sim.conf["RUNTIME_BROWSER"] ){
		requestAnimationFrame( step )
	}
}

function drawBelow(){
	this.Cim.drawPixelSet( this.channelvoxels, "AAAAAA" ) 
}

function initializeGrid(){
	
		// add the initializer if not already there
		if( !this.helpClasses["gm"] ){ this.addGridManipulator() }
		this.buildChannel()
		this.gm.seedCellAt( 1, [50,50] )
}
	
function buildChannel() {
    this.channelvoxels = [];

    // Calculate center coordinates
    const centerX = Math.floor(this.C.extents[0] / 2);
    const centerY = Math.floor(this.C.extents[1] / 2);

    // Set a new, larger radius
    const radius = 40; // Increased radius for the large circle

    // Iterate through all possible coordinates
    for (let x = 0; x < this.C.extents[0]; x++) {
        for (let y = 0; y < this.C.extents[1]; y++) {
            // Calculate distance to the center
            let dx = Math.abs(x - centerX);
            let dy = Math.abs(y - centerY);

            // Check if within the circle
            if (Math.sqrt(dx * dx + dy * dy) < radius) {
                this.channelvoxels.push([x, y]);
            }
        }
    }

    this.C.add(new CPM.BorderConstraint({
        BARRIER_VOXELS: this.channelvoxels
    }));
}

// No custom methods.
</script>
</head>
<body onload="initialize()" class="vsc-initialized">

<div class="container">

<div id="sim" class="simcontainer"><canvas width="400" height="400"></canvas></div>

</div>


<div id="speechify-global-notifications"><template shadowrootmode="open"><div id="speechify-global-notifications-root" style="position: fixed; top: 0px; left: 0px; height: 100vh; z-index: 2147483644; width: 0vw;"></div></template></div><div id="speechify-settings-modal" style="position: absolute; bottom: 0px; right: 0px;"><template shadowrootmode="open"><div id="speechify-settings-modal-root" style="position: fixed; z-index: 2147483646; top: 0px; left: 0px; height: fit-content; font-size: initial;"></div></template></div><div id="speechify-screenshot-mode" style="position: fixed; top: 0px; right: 0px; width: 100%; min-height: 100%; z-index: 2147483640; display: none !important;"><template shadowrootmode="open"><div id="speechify-screenshot-mode-root" style="width: 100%; height: 100%; position: relative;"></div></template></div><div id="speechify-hover-player-shadow-root"><template shadowrootmode="open"><div id="speechify-hover-player-container"></div></template></div></body><screen-shader style="display: block; transition: none; margin: 0px; padding: 0px; border-radius: 0px; border: none; outline: none; visibility: visible; max-height: none; max-width: none; clip: unset; overflow: visible; opacity: 1;"><!--This is an element that contains all the html for the screen shader extension to work--><div style="display: block; transition: none; margin: 0px; padding: 0px; border-radius: 0px; border: none; outline: none; visibility: visible; max-height: none; max-width: none; clip: unset; overflow: visible; opacity: 0; position: fixed; inset: -10%; width: auto; height: auto; z-index: 2147483646; background: black;"></div><div style="display: block; transition: none; margin: 0px; padding: 0px; border-radius: 0px; border: none; outline: none; visibility: visible; max-height: none; max-width: none; clip: unset; overflow: visible; opacity: 0; position: fixed; inset: -10%; width: auto; height: auto; z-index: 2147483645; background: rgba(255, 147, 41, 0); mix-blend-mode: multiply;"></div><style>screen-shader{pointer-events: none !important;z-index: auto !important;}</style><style></style>
<!-- saved from url=(0059)https://artistoo.net/explorables/asset/frame-obstacles.html -->
<html style="display: block; transition: none; margin: 0px; padding: 0px; border-radius: 0px; border: none; outline: none; visibility: visible; max-height: none; max-width: none; clip: unset; overflow: visible; opacity: 1; position: fixed; inset: -10%; width: auto; height: auto; z-index: -2147483647;"></html><div style="display: block; transition: none; margin: 0px; padding: 0px; border-radius: 0px; border: none; outline: none; visibility: visible; max-height: none; max-width: none; clip: unset; overflow: visible; opacity: 1; position: fixed; inset: -10%; width: auto; height: auto; z-index: -2147483646; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0);"></div></screen-shader></html>